# Руководство по внесению вклада

Благодарим за интерес к внесению вклада в проект пользовательских правил и декодеров для Wazuh! Ниже приведены рекомендации по процессу внесения изменений.

## Процесс создания Pull Request

1. Форкните репозиторий и создайте новую ветку с говорящим названием:
   ```bash
   git checkout -b feature/mikrotik-brute-force-rules
   ```

2. Внесите необходимые изменения, следуя рекомендациям из [Руководства разработчика](docs/developer-guide.md).

3. Запустите локальное тестирование перед отправкой изменений:
   ```bash
   ./scripts/run_local_tests.sh
   ```

4. Закоммитите и отправьте изменения в свой форк:
   ```bash
   git add .
   git commit -m "Добавлены правила обнаружения брутфорс атак на MikroTik"
   git push origin feature/mikrotik-brute-force-rules
   ```

5. Создайте Pull Request через интерфейс GitHub.

## Стандарты кодирования

### XML-форматирование

- Используйте отступы в 2 пробела
- Все XML-теги должны быть закрыты
- Используйте комментарии для описания групп правил или сложных декодеров
- Каждый файл должен содержать XML-заголовок: `<?xml version="1.0" encoding="UTF-8"?>`

### Именование правил и декодеров

- Давайте правилам понятные ID, следуя рекомендациям из руководства
- Используйте говорящие имена для декодеров, например `mikrotik-login-success`
- Правила должны иметь информативные описания

### Комментарии в коде

Для сложных правил или декодеров добавляйте комментарии, объясняющие их назначение:

```xml
<!-- 
  Декодер для сообщений входа в MikroTik.
  Примеры логов:
  - "Mikrotik login success for user admin from 192.168.1.100 via ssh"
  - "Mikrotik login failure for user admin from 192.168.1.100 via ssh"
-->
```

## Рекомендации по контрибьютингу

### Что приветствуется

- Новые правила и декодеры для часто используемых систем
- Исправления в существующих правилах
- Улучшения в тестовых скриптах и CI/CD
- Дополнение документации

### Процесс рассмотрения PR

1. CI/CD процесс запустится автоматически при создании PR
2. Если CI/CD проходит успешно, мейнтейнеры рассмотрят PR
3. Могут быть предложены изменения или улучшения
4. После утверждения, PR будет слит с основной веткой

### Признание вклада

Все контрибьюторы будут добавлены в список CONTRIBUTORS.md. Если вы хотите быть упомянуты под определенным именем или с определенной аффилиацией, укажите это в PR.

## Отладка проблем

### Общие проблемы

1. **XML-ошибки**: Используйте `xmllint` для проверки файлов:
   ```bash
   xmllint --noout rules/local_rules.xml
   ```

2. **Проблемы с декодерами**: Проверьте декодеры с тестовыми логами:
   ```bash
   docker-compose exec wazuh.manager bash -c 'echo "тестовый лог" | /var/ossec/bin/wazuh-logtest -v'
   ```

3. **CI/CD не проходит**: Проверьте детальный лог в GitHub Actions для выявления проблемы.

## Обратная связь

Если у вас есть вопросы или предложения по улучшению процесса контрибьютинга, пожалуйста, создайте Issue в репозитории или свяжитесь с мейнтейнерами проекта. 